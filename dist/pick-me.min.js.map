{
  "version": 3,
  "sources": ["../src/pick-me/ui.ts", "../src/pick-me/i18n/de.ts", "../src/pick-me/i18n/en.ts", "../src/pick-me/i18n/i18n.ts", "../src/pick-me/settings.ts", "../src/pick-me.ts"],
  "sourcesContent": ["import PickMeSettings from './settings'\nimport { OptgroupMap, OptionMap } from \"../pick-me\"\n\nexport default class PickMeUi {\n  element: HTMLSelectElement\n  settings: PickMeSettings\n  disabled: boolean\n  wrapper: HTMLDivElement\n  button: HTMLButtonElement\n  popup: HTMLDivElement\n  buttonText: HTMLSpanElement\n  searchInput: HTMLInputElement\n  resultsScrollWrapper: HTMLDivElement\n  resultsWrapper: HTMLDivElement\n  hovered: Element\n\n  constructor ({ element, settings }: { element: HTMLSelectElement, settings: PickMeSettings }) {\n    this.element = element\n    this.settings = settings\n    this.disabled = false\n\n    this.wrapper = this.buildWrapper()\n    this.button = this.buildButton()\n    if (!this.disabled) this.popup = this.buildPopup()\n\n    this.hideOriginalSelect()\n    this.assemble()\n  }\n\n  hideOriginalSelect () {\n    this.element.classList.add('pm__hidden')\n    this.element.setAttribute('tabindex', '-1')\n  }\n\n  showOriginalSelect () {\n    this.element.classList.remove('pm__hidden')\n    this.element.removeAttribute('tabindex')\n  }\n\n  assemble () {\n    this.wrapper.appendChild(this.button)\n    if (!this.disabled) {\n      if (this.settings.base.popup.containerSelector) {\n        const container = document.querySelector(this.settings.base.popup.containerSelector)\n        if (container) {\n          container.appendChild(this.popup)\n          this.popup.style.position = 'absolute'\n          this.popup.style.top = '0'\n        }\n      } else {\n        this.wrapper.appendChild(this.popup)\n      }\n    }\n    this.element.parentNode.insertBefore(this.wrapper, this.element)\n  }\n\n  positionPopup () {\n    if (this.settings.base.popup.containerSelector) {\n      const pos = this.wrapper.getBoundingClientRect()\n      const offset = getOffsetFromBoundingBox(pos)\n      const top = offset.top + this.wrapper.offsetHeight\n\n      if (this.shouldDropUp()) {\n        this.popup.style.top = (top - this.popup.offsetHeight - this.button.offsetHeight - parseInt(window.getComputedStyle(this.popup).marginTop)).toString() + 'px'\n      } else {\n        this.popup.style.top = top.toString() + 'px'\n      }\n      if (this.settings.base.popup.alignRight) {\n        const right = window.innerWidth - pos.left - this.wrapper.offsetWidth\n        this.popup.style.right = right + 'px'\n      } else {\n        this.popup.style.left = offset.left.toString() + 'px'\n      }\n      this.popup.style.minWidth = this.wrapper.offsetWidth + 'px'\n      this.popup.style.width = this.settings.base.popup.width\n      this.popup.style.position = 'absolute'\n    } else {\n      if (this.shouldDropUp()) {\n        this.popup.style.top = 'auto'\n        this.popup.style.bottom = (this.button.offsetHeight + parseInt(window.getComputedStyle(this.popup).marginTop)).toString() + 'px'\n      } else {\n        this.popup.style.top = '100%'\n        this.popup.style.bottom = 'auto'\n      }\n    }\n  }\n\n  shouldDropUp () {\n    const pos = this.button.getBoundingClientRect()\n    const offset = getOffsetFromBoundingBox(pos)\n    const selectOffsetTop = offset.top - document.documentElement.scrollTop\n    const selectOffsetBot = window.innerHeight - selectOffsetTop - this.button.offsetHeight\n    return selectOffsetTop > selectOffsetBot && selectOffsetBot < this.popup.offsetHeight\n  }\n\n  buildWrapper () {\n    const wrapper = document.createElement('div')\n    wrapper.classList.add('pick-me')\n    if (this.settings.base.multiple) wrapper.classList.add('pick-me--multiple')\n    return wrapper\n  }\n\n  buildButton () {\n    const button = document.createElement('button')\n    button.setAttribute('type', 'button')\n    button.classList.add('pm__button')\n    this.settings.button.classList.forEach(buttonClass => {\n      button.classList.add(buttonClass)\n    })\n    if (this.disabled) {\n      button.disabled = true\n      this.settings.button.disabledClassList.forEach(buttonDisabledClass => {\n        button.classList.add(buttonDisabledClass)\n      })\n    }\n\n    this.buttonText = document.createElement('span')\n    this.buttonText.classList.add('pm__button-text')\n\n    if (this.settings.button.iconHtml && this.settings.button.iconHtml.length > 0) {\n      button.appendChild(this.buttonText)\n      button.insertAdjacentHTML('beforeend', this.settings.button.iconHtml)\n    } else {\n      button.appendChild(this.buttonText)\n    }\n\n    return button\n  }\n\n\n  buildPopup () {\n    const popup = document.createElement('div')\n    popup.classList.add('pm__popup')\n    if (this.settings.base.popup.alignRight) popup.classList.add('pm__popup--right')\n\n    if (this.settings.search.enabled) popup.appendChild(this.buildSearchInput())\n    popup.appendChild(this.buildResultsScrollWrapper())\n\n    return popup\n  }\n\n  buildSearchInput () {\n    const wrapper = document.createElement('div')\n    wrapper.classList.add('pm__search-input__wrapper')\n    this.searchInput = document.createElement('input')\n    this.searchInput.type = 'search'\n    this.searchInput.setAttribute('placeholder', this.settings.search.input.placeholderText)\n    this.searchInput.classList.add('pm__search-input')\n\n    this.settings.search.input.classList.forEach(searchInputClass => {\n      this.searchInput.classList.add(searchInputClass)\n    })\n\n    wrapper.appendChild(this.searchInput)\n    return wrapper\n  }\n\n  buildResultsScrollWrapper () {\n    this.resultsScrollWrapper = document.createElement('div')\n    this.resultsScrollWrapper.classList.add('pm__results-scroll-wrapper')\n    this.resultsWrapper = document.createElement('div')\n    this.resultsWrapper.classList.add('pm__results')\n    this.resultsWrapper.setAttribute('aria-role', 'list')\n    this.resultsScrollWrapper.appendChild(this.resultsWrapper)\n    return this.resultsScrollWrapper\n  }\n\n  // dynamic part: optgroups Map<label, value[]>\n  renderEntries (allOptions: OptionMap, selectedOptions: OptionMap, optgroups: OptgroupMap) {\n    if (optgroups.size > 0) {\n      for (const optgroupLabel of optgroups.keys()) {\n        if (optgroupLabel && optgroupLabel.length > 0) {\n          const label = document.createElement('span')\n          label.classList.add('pm__opt-group-label')\n          label.innerText = optgroupLabel\n          this.resultsWrapper.appendChild(label)\n        }\n        const pageUl = buildUl(this.settings.list.classList)\n        pageUl.setAttribute('data-label', optgroupLabel)\n        this.renderNewEntries(allOptions, selectedOptions, optgroups.get(optgroupLabel), pageUl)\n        this.resultsWrapper.appendChild(pageUl)\n        //if (optgroupLabel && optgroupLabel.length > 0 && arr[index + 1]) {\n        const hr = document.createElement('hr')\n        hr.classList.add('pm__hr')\n        this.resultsWrapper.appendChild(hr)\n      }\n    } else {\n      console.log(this.settings.search.noResultsText)\n      const li = buildLi({ text: this.settings.search.noResultsText })\n      li.classList.add('pm__results-list__item--muted')\n      const pageUl = buildUl(this.settings.list.classList)\n      pageUl.appendChild(li)\n      this.resultsWrapper.appendChild(pageUl)\n    }\n  }\n\n  renderNewEntries (allOptions: OptionMap, selectedOptions: OptionMap, optgroupValues: string[], ul: HTMLUListElement) {\n    for (const value of optgroupValues) {\n      const optionData = allOptions.get(value)\n      const li = buildLi({\n        value,\n        ...optionData,\n        selected: selectedOptions.has(value),\n        multiple: this.settings.base.multiple,\n        checkedIconHtml: this.settings.list.checkedIconHtml\n      })\n      ul.appendChild(li)\n    }\n  }\n\n  selectItem (value: string) {\n    const option = this.element.querySelector('option[value=\"' + value.replaceAll('\"', '\\\\\"') + '\"]') as HTMLOptionElement\n    option.selected = true\n    option.setAttribute('data-selected', '')\n    this.addSelectedClassByValue(value)\n  }\n\n  deselectItem (value: string) {\n    const option = this.element.querySelector('option[value=\"' + value.replaceAll('\"', '\\\\\"') + '\"]') as HTMLOptionElement\n    option.selected = false\n    option.removeAttribute('data-selected')\n    this.removeSelectedClassByValue(value)\n  }\n\n  addSelectedClassByValue (value: string) {\n    const li = this.resultsWrapper.querySelector('li[data-value=\"' + value.replaceAll('\"', '\\\\\"') + '\"]') as HTMLLIElement\n    if (li) setLiSelected(li, true, this.settings.base.multiple, this.settings.list.checkedIconHtml)\n  }\n\n  removeSelectedClassByValue (value: string) {\n    const li = this.resultsWrapper.querySelector('li[data-value=\"' + value.replaceAll('\"', '\\\\\"') + '\"]') as HTMLLIElement\n    if (li) setLiSelected(li, false, this.settings.base.multiple, this.settings.list.checkedIconHtml)\n  }\n\n  destroy () {\n    this.showOriginalSelect()\n    if (this.settings.base.popup.containerSelector) {\n      const container = document.querySelector(this.settings.base.popup.containerSelector)\n      if (container) container.removeChild(this.popup)\n    }\n    if (this.element && this.element.parentNode) this.element.parentNode.removeChild(this.wrapper)\n  }\n\n  getSelected () {\n    return this.resultsWrapper.querySelectorAll('li.pm__results-list__item--selected')[0]\n  }\n\n  focusPreviousEntry () {\n    if (!this.hovered) this.hovered = this.getSelected()\n    const allLis = Array.from(this.resultsWrapper.querySelectorAll('li.pm__results-list__item[data-value]'))\n    if (this.hovered) {\n      const hoveredIndex = allLis.indexOf(this.hovered)\n      if (hoveredIndex > 0) {\n        this.hovered.classList.remove('pm__results-list__item--hover')\n        this.hovered = allLis[hoveredIndex - 1]\n        this.hovered.classList.add('pm__results-list__item--hover')\n        this.scrollEntryIntoView(this.hovered)\n      }\n    } else {\n      const first = allLis[0]\n      if (!first) return\n      first.classList.add('pm__results-list__item--hover')\n      this.hovered = first\n      this.scrollEntryIntoView(first)\n    }\n  }\n\n  focusNextEntry () {\n    if (!this.hovered) this.hovered = this.getSelected()\n    const allLis = Array.from(this.resultsWrapper.querySelectorAll('li.pm__results-list__item[data-value]'))\n    if (this.hovered) {\n      const hoveredIndex = allLis.indexOf(this.hovered)\n      if (hoveredIndex < allLis.length - 1) {\n        this.hovered.classList.remove('pm__results-list__item--hover')\n        this.hovered = allLis[hoveredIndex + 1]\n        this.hovered.classList.add('pm__results-list__item--hover')\n        this.scrollEntryIntoView(this.hovered)\n      }\n    } else {\n      const first = allLis[0]\n      if (!first) return\n      first.classList.add('pm__results-list__item--hover')\n      this.hovered = first\n      this.scrollEntryIntoView(first)\n    }\n  }\n\n  scrollEntryIntoView (entry) {\n    const entryOffsetTop = entry.offsetTop - this.resultsScrollWrapper.offsetTop\n    const shouldScrollDown = this.resultsScrollWrapper.offsetHeight + this.resultsScrollWrapper.scrollTop < entryOffsetTop + entry.offsetHeight\n    const shouldScrollUp = entryOffsetTop < this.resultsScrollWrapper.scrollTop\n\n    if (shouldScrollDown) {\n      this.resultsScrollWrapper.scrollTop = entryOffsetTop - this.resultsScrollWrapper.offsetHeight + entry.offsetHeight\n    } else if (shouldScrollUp) {\n      this.resultsScrollWrapper.scrollTop = entryOffsetTop\n    }\n  }\n\n  setButtonText (selectedValues: OptionMap) {\n    if (selectedValues && selectedValues.size > 0) {\n      this.buttonText.innerHTML = this.renderButtonText(selectedValues)\n    } else {\n      this.buttonText.innerHTML = this.settings.button.placeholderText\n    }\n  }\n\n  renderButtonText (selectedValues: OptionMap) {\n    if (this.settings.button.selectedText.format) {\n      const match = this.settings.button.selectedText.format.match(/count\\s?>\\s?([0-9]*)/)\n      const count = match && match[1] && parseInt(match[1])\n\n      if (count && count < selectedValues.size) {\n        return this.settings.button.selectedText.text.replace(this.settings.button.selectedText.variable, selectedValues.size.toString())\n      } else {\n        return joinSelectedTexts(selectedValues)\n      }\n    } else {\n      return joinSelectedTexts(selectedValues)\n    }\n  }\n}\n\nfunction joinSelectedTexts (selectedValues: OptionMap) {\n  const selected = []\n  for (const optionData of selectedValues.values()) {\n    selected.push(optionData.text)\n  }\n  return selected.join(', ')\n}\n\nfunction buildUl (additionalClasses: string[]) {\n  const pageUl = document.createElement('ul')\n  pageUl.classList.add('pm__results-list')\n  pageUl.setAttribute('aria-role', 'listbox')\n  additionalClasses.forEach(function (listClass) {\n    pageUl.classList.add(listClass)\n  })\n  return pageUl\n}\n\nfunction buildLi (options: { text: string; selected?: boolean; multiple?: boolean; checkedIconHtml?: string; subtext?: string; img?: string; searchData?: string; value?: string }) {\n  const text = options.text\n  const value = options.value\n  const subtext = options.subtext\n  const imgAttributes = options.img\n  const li = document.createElement('li')\n\n  const textSpan = document.createElement('span')\n  textSpan.classList.add('pm__results-list__item__text')\n  textSpan.innerHTML = text\n\n  if (typeof value !== 'undefined' && value !== null) li.setAttribute('data-value', value)\n  if (typeof text !== 'undefined' && text !== null) {\n    li.setAttribute('aria-label', text)\n    li.setAttribute('title', textSpan.innerText)\n  }\n\n  li.setAttribute('aria-role', 'listitem')\n  li.classList.add('pm__results-list__item')\n\n  if (typeof imgAttributes !== 'undefined' && imgAttributes !== null) {\n    const imageTag = document.createElement('img')\n    Object.keys(imgAttributes).forEach(function (attr) {\n      imageTag.setAttribute(attr, imgAttributes[attr])\n    })\n\n    imageTag.classList.add('pm__results-list__item__image')\n    li.appendChild(imageTag)\n  }\n\n  li.appendChild(textSpan)\n\n  if (typeof subtext !== 'undefined' && subtext !== null) {\n    const subtextDom = document.createElement('small')\n    subtextDom.innerHTML = subtext\n    subtextDom.classList.add('pm__results-list__item__subtext')\n    li.appendChild(subtextDom)\n  }\n\n  if (options.selected) {\n    setLiSelected(li, true, options.multiple, options.checkedIconHtml)\n  }\n  return li\n}\n\nfunction setLiSelected (li: HTMLLIElement, selected: boolean, addCheck: boolean, checkedIconHtml: string) {\n  if (selected) {\n    if (addCheck) {\n      const wrap = document.createElement('span')\n      wrap.classList.add('pm__results-list__item__check-mark')\n      li.appendChild(wrap)\n\n      wrap.insertAdjacentHTML('beforeend', checkedIconHtml)\n    } else {\n      li.classList.remove('pm__results-list__item--hover')\n      li.classList.add('pm__results-list__item--selected')\n    }\n  } else {\n    if (addCheck) {\n      const check = li.querySelector('.pm__results-list__item__check-mark')\n      if (check) li.removeChild(check)\n    } else {\n      li.classList.remove('pm__results-list__item--selected')\n    }\n  }\n}\n\nfunction getOffsetFromBoundingBox (box) {\n  const docElem = document.documentElement\n\n  return {\n    top: box.top + (window.pageYOffset || docElem.scrollTop) - (docElem.clientTop || 0),\n    left: box.left + (window.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || 0)\n  }\n}\n", "export default {\n  searchPlaceholder: 'Suchen',\n  emptySelectButtonText: 'Alle anzeigen',\n  noResultsText: 'Keine Ergebnisse gefunden',\n  selectedText: '%num% Eintr\u00E4ge ausgew\u00E4hlt',\n  selectAllButtonText: 'Alles ausw\u00E4hlen',\n  deselectAllButtonText: 'Nichts ausw\u00E4hlen'\n}\n", "export default {\n  searchPlaceholder: 'Search',\n  emptySelectButtonText: 'Show all',\n  noResultsText: 'No results found',\n  selectedText: '%num% selected',\n  selectAllButtonText: 'Select all',\n  deselectAllButtonText: 'Deselect all'\n}\n", "import de from './de'\nimport en from './en'\n\nconst i18n = { de, en }\nexport default i18n\n", "import i18n from './i18n/i18n'\n\nexport type Settings = {\n  id: string\n  base?: BaseSettings\n  language?: LanguageSettings\n  search?: SearchSettings\n  button?: ButtonSettings\n  list?: ListSettings\n}\n\ntype BaseSettings = {\n  multiple?: boolean\n  debug?: boolean\n  popup?: {\n    containerSelector?: string\n    alignRight?: boolean\n    width?: string\n  }\n}\n\ntype LanguageSettings = {\n  locale?: string\n  i18n?: Record<string, string>\n}\n\ntype SearchSettings = {\n  enabled?: boolean\n  debounce?: number\n  input?: {\n    placeholderText?: string\n    classList?: string[]\n  }\n  noResultsText?: string\n}\n\ntype ButtonSettings = {\n  placeholderText?: string\n  classList?: string[]\n  disabledClassList?: string[]\n  iconHtml?: string\n  selectedText?: {\n    format?: string\n    variable?: string\n    text?: string\n  }\n}\n\ntype ListSettings = {\n  checkedIconHtml?: string,\n  classList?: string[]\n}\n\ntype SelectAllSettings = {\n  enabled?: boolean\n  classList?: string[]\n  wrapperClassList?: string[]\n  selectText?: string\n  deselectText?: string\n}\n\nexport default class PickMeSettings {\n  element: HTMLSelectElement\n  base?: BaseSettings\n  language: LanguageSettings\n  search: SearchSettings\n  button: ButtonSettings\n  list: ListSettings\n  selectAll: SelectAllSettings\n\n  constructor (props: Settings) {\n    this.element = document.getElementById(props.id) as HTMLSelectElement\n    this.setBase(props.base)\n    this.setLanguage(props.language)\n    this.setSearch(props.search)\n    this.setButton(props.button)\n    this.setList(props.list)\n  }\n\n  setBase (props: BaseSettings) {\n    this.base = {}\n    this.base.multiple = !!this.element.multiple || !!props?.multiple\n    this.base.debug = props.debug\n\n    this.base.popup = {}\n    this.base.popup.containerSelector = props?.popup?.containerSelector\n    this.base.popup.alignRight = props?.popup?.alignRight\n    this.base.popup.width = props?.popup?.width || '300px'\n  }\n\n  setLanguage (props: LanguageSettings) {\n    this.language = {}\n    this.language.locale = props?.locale || document.documentElement.lang || 'en'\n    this.language.i18n = props?.i18n || i18n[props?.locale] || i18n.en\n  }\n\n  setSearch (props: SearchSettings) {\n    this.search = {}\n\n    this.search.enabled = !!props?.enabled\n    this.search.debounce = props?.debounce || 50\n    this.search.input = {}\n    this.search.input.placeholderText = props?.input?.placeholderText || this.language.i18n?.searchPlaceholder || 'Search'\n    this.search.input.classList = props?.input?.classList || []\n    this.search.noResultsText = props?.noResultsText || this.language.i18n.noResultsText || 'No results'\n  }\n\n  setButton (props: ButtonSettings) {\n    this.button = {}\n    this.button.placeholderText = props?.placeholderText || this.language.i18n?.emptySelectButtonText || 'Select'\n    this.button.classList = props?.classList || []\n    this.button.disabledClassList = props?.disabledClassList || []\n    this.button.iconHtml = props?.iconHtml || '\u2BC6'\n\n    this.button.selectedText = {}\n    this.button.selectedText.format = props?.selectedText?.format\n    this.button.selectedText.variable = props?.selectedText?.variable || '%num%'\n    this.button.selectedText.text = props?.selectedText?.text || this.language.i18n?.selectedText || `%num% selected`\n  }\n\n  setList (props: ListSettings) {\n    this.list = {}\n\n    this.list.checkedIconHtml = props?.checkedIconHtml || '\u2713'\n    this.list.classList = props?.classList || []\n  }\n}", "import PickMeUi from './pick-me/ui'\nimport PickMeSettings, { Settings } from './pick-me/settings'\n\nexport type OptionData = {\n  text: string\n  subtext: string\n  img: string\n  searchData: string\n}\n\nexport type Options = {\n  all: OptionMap\n  selected: OptionMap\n  optgroups: OptgroupMap\n}\nexport type OptionMap = Map<string, OptionData>\nexport type OptgroupMap = Map<string, string[]>\n\nexport default class PickMe {\n  id: string\n  element: HTMLSelectElement\n  label: HTMLLabelElement\n  settings: PickMeSettings\n  initialSelectedValues: string[]\n  open: boolean\n  handlers: Record<string, (e?: Event) => void>\n  ui: PickMeUi\n  options: Options\n  searchInputTimer: number\n\n  constructor (options: Settings) {\n    this.id = options.id\n    this.element = document.getElementById(this.id) as HTMLSelectElement\n    this.label = document.querySelector('label[for=\"' + this.id + '\"]')\n\n    this.settings = new PickMeSettings(options)\n    this.initialSelectedValues = []\n    this.open = false\n    this.handlers = {}\n\n    this.initialize()\n    this.logDebugMessage('initialized with options:', this.settings)\n    return this\n  }\n\n  initialize () {\n    this.setupInitialValues()\n    this.ui = this.buildMarkup()\n    this.addHandlers()\n    this.addEvents()\n    this.setupValues()\n\n    this.ui.renderEntries(this.options.all, this.options.selected, this.options.optgroups)\n    this.addEventListenersForPage()\n\n    this.ui.setButtonText(this.options.selected)\n  }\n\n  setupInitialValues () {\n    const options = this.element.querySelectorAll('option[selected]') as NodeListOf<HTMLOptionElement>\n    options.forEach(option => (this.initialSelectedValues.push(option.value)))\n  }\n\n  addHandlers () {\n    this.handlers.closePopupHandler = (e: Event) => (this.closePopup(e))\n    this.handlers.selectHandler = (e: Event) => (this.select(e))\n    this.handlers.containerPositionHandler = () => (this.ui.positionPopup())\n    this.handlers.resetFormHandler = () => (this.resetAndReload())\n    this.handlers.labelClickHandler = (e: Event) => {\n      e.preventDefault()\n      this.ui.button.focus()\n    }\n  }\n\n  addEvents () {\n    this.ui.button.addEventListener('click', () => (this.togglePopup()))\n    this.ui.popup.addEventListener('click', e => (e.stopPropagation()))\n    if (this.settings.search.enabled) {\n      this.ui.searchInput.addEventListener('input', () => (this.search()))\n      this.ui.button.addEventListener('keydown', e => (this.onButtonKeyDown(e)))\n      this.ui.popup.addEventListener('keydown', e => (this.onMarkupKeyDown(e)))\n    } else {\n      this.ui.button.addEventListener('keydown', e => (this.onMarkupKeyDown(e)))\n    }\n    document.addEventListener('click', this.handlers.closePopupHandler)\n    window.addEventListener('resize', this.handlers.containerPositionHandler)\n    window.addEventListener('scroll', this.handlers.containerPositionHandler)\n    if (this.label) this.label.addEventListener('click', this.handlers.labelClickHandler)\n    if (this.element.form) this.element.form.addEventListener('reset', this.handlers.resetFormHandler)\n    onDomRemove(this.ui.element, this.destroy.bind(this))\n  }\n\n  setupValues () {\n    this.options = {\n      all: new Map(), // Map<value, optionData>\n      selected: new Map(), // Map<value, optionData>\n      optgroups: new Map() // Map<label, value[]>\n    }\n    Array(...this.element.options).forEach(option => {\n      const parentNode = option.parentNode as HTMLOptGroupElement\n      const optgroupLabel = parentNode.nodeName === 'OPTGROUP' ? parentNode.label : ''\n\n      if (!this.options.optgroups.has(optgroupLabel)) this.options.optgroups.set(optgroupLabel, [])\n\n      const optionData = {\n        text: option.innerHTML,\n        subtext: option.getAttribute('data-subtext'),\n        img: JSON.parse(option.getAttribute('data-img')),\n        searchData: option.innerText.toLowerCase().trim()\n      }\n      this.options.all.set(option.value, optionData)\n      this.options.optgroups.get(optgroupLabel).push(option.value)\n\n      if (option.selected || option.hasAttribute('selected')) {\n        this.options.selected.set(option.value, optionData)\n        option.setAttribute('data-selected', 'true')\n      }\n    })\n  }\n\n  buildMarkup () {\n    return new PickMeUi({ element: this.element, settings: this.settings })\n  }\n\n  resetAndReload () {\n    this.logDebugMessage('form reset! reloading pick-me')\n    this.reload()\n  }\n\n  onButtonKeyDown (e: KeyboardEvent) {\n    if (e.keyCode === 13) { // enter\n      e.preventDefault()\n      this.togglePopup(e)\n    }\n  }\n\n  onMarkupKeyDown (e: KeyboardEvent) {\n    if (e.keyCode === 9 || e.keyCode === 27) { // tab || esc\n      this.closePopupAndFocus(e)\n    } else if (e.keyCode === 40) { // arrow down\n      e.preventDefault()\n      this.ui.focusNextEntry()\n    } else if (e.keyCode === 38) { // arrow up\n      e.preventDefault()\n      this.ui.focusPreviousEntry()\n    } else if (e.keyCode === 13) { // enter\n      e.preventDefault()\n      if (this.open) {\n        const li = this.ui.hovered\n        if (li) this.select({ currentTarget: li } as unknown as Event)\n      } else {\n        this.openPopup()\n      }\n    }\n  }\n\n  removeEvents () {\n    document.removeEventListener('click', this.handlers.closePopupHandler)\n    window.removeEventListener('resize', this.handlers.containerPositionHandler)\n    window.removeEventListener('scroll', this.handlers.containerPositionHandler)\n    if (this.label) this.label.removeEventListener('click', this.handlers.labelClickHandler)\n    if (this.element.form) this.element.form.removeEventListener('reset', this.handlers.resetFormHandler)\n  }\n\n  togglePopup (e?: Event) {\n    this.open ? this.closePopupAndFocus(e) : this.openPopup()\n  }\n\n  search () {\n    if (this.searchInputTimer) clearTimeout(this.searchInputTimer)\n    if (this.ui.hovered) this.ui.hovered.classList.remove('pm__results-list__item--hover')\n    this.ui.hovered = null\n\n    this.searchInputTimer = setTimeout(() => {\n      this.doSearch()\n    }, this.settings.search.debounce)\n  }\n\n  doSearch () {\n    const inputValue = this.ui.searchInput.value\n    const lowerInputValue = inputValue.toLowerCase()\n\n    const filteredValues = new Map()\n    for (const [optGroupLabel, values] of this.options.optgroups) {\n      for (const value of values) {\n        const optionData = this.options.all.get(value)\n        if (optionData.searchData.includes(lowerInputValue)) {\n          if (!filteredValues.get(optGroupLabel)) filteredValues.set(optGroupLabel, [])\n          filteredValues.get(optGroupLabel).push(value)\n        }\n      }\n    }\n\n    this.ui.resultsWrapper.innerHTML = ''\n    this.ui.renderEntries(this.options.all, this.options.selected, filteredValues)\n    this.addEventListenersForPage()\n  }\n\n  openPopup () {\n    this.ui.popup.classList.add('pm__popup--visible')\n    this.open = true\n    this.ui.positionPopup()\n    if (this.settings.search.enabled) this.ui.searchInput.focus()\n  }\n\n  closePopup (e?: Event) {\n    const target = e?.target as HTMLButtonElement\n    const clickedButton = e && (target === this.ui.button || target?.parentElement === this.ui.button)\n    if (this.open && !clickedButton) {\n      this.ui.popup.classList.remove('pm__popup--visible')\n      this.open = false\n      if (this.ui.hovered) this.ui.hovered.classList.remove('pm__results-list__item--hover')\n      this.ui.hovered = null\n      if (this.settings.search.enabled) this.resetSearch()\n    }\n  }\n\n  closePopupAndFocus (e: Event) {\n    this.closePopup(e)\n    this.ui.button.focus()\n  }\n\n  addEventListenersForPage () {\n    Array(...this.ui.resultsWrapper.querySelectorAll('li.pm__results-list__item[data-value]:not(.pm__results-list__item--disabled)')).forEach(li => {\n      li.addEventListener('click', this.handlers.selectHandler)\n    })\n  }\n\n  select (e: Event) {\n    const li = e.currentTarget as HTMLLIElement\n    const value = li.getAttribute('data-value')\n    const optionData = this.options.all.get(value)\n\n    if (this.settings.base.multiple) {\n      this.toggleSelectedValue(value, optionData)\n    } else {\n      this.setSelectedValue(value, optionData)\n    }\n\n    this.ui.setButtonText(this.options.selected)\n    if (!this.settings.base.multiple) this.closePopupAndFocus(e)\n    this.triggerChange()\n  }\n\n  triggerChange () {\n    this.element.dispatchEvent(new CustomEvent('change', { detail: this.options.selected }))\n  }\n\n  toggleSelectedValue (value: string, optionData: OptionData) {\n    if (this.options.selected.get(value)) {\n      this.removeSelectedValue(value)\n    } else {\n      this.addSelectedValue(value, optionData)\n    }\n  }\n\n  addSelectedValue (value: string, optionData: OptionData) {\n    this.options.selected.set(value, optionData)\n\n    this.ui.selectItem(value)\n    if (this.settings.search.enabled) this.ui.searchInput.focus()\n  }\n\n  removeSelectedValue (value: string) {\n    this.options.selected.delete(value)\n    this.ui.deselectItem(value)\n  }\n\n  setSelectedValue (value: string, optionData: OptionData) {\n    if (this.options.selected.size > 0) {\n      this.removeSelectedValue(this.options.selected.entries().next().value[0])\n      const selected = this.ui.getSelected()\n      if (selected) selected.classList.remove('pm__results-list__item--selected')\n    }\n    this.addSelectedValue(value, optionData)\n  }\n\n  logDebugMessage (msg: string, someObject?: object) {\n    if (!this.settings.base.debug) return\n    if (msg) console.log('PickMe#' + this.id, msg)\n    if (someObject) console.log(someObject)\n  }\n\n  resetSearch () {\n    this.ui.searchInput.value = ''\n    this.search()\n  }\n\n  destroy () {\n    this.removeEvents()\n    this.ui.destroy()\n    this.options = null\n    delete this.ui\n    this.element.classList.remove('pm__hidden')\n  }\n\n  reload () {\n    for (const value of this.options.selected.keys()) {\n      this.ui.deselectItem(value)\n    }\n    this.destroy()\n\n    this.initialSelectedValues.forEach(value => {\n      const option = this.element.querySelector('option[value=\"' + value.replaceAll('\"', '\\\\\"') + '\"]') as HTMLOptionElement\n      option.selected = true\n    })\n\n    this.initialize()\n  }\n}\n\n/**\n * Helpers\n */\n\nfunction onDomRemove (element: HTMLElement, onDetachCallback: () => void) {\n  const observer = new MutationObserver(function () {\n    function isDetached (el: ParentNode) {\n      if (el.parentNode === document) {\n        return false\n      } else if (el.parentNode === null) {\n        return true\n      } else {\n        return isDetached(el.parentNode)\n      }\n    }\n\n    if (isDetached(element)) {\n      observer.disconnect()\n      onDetachCallback()\n    }\n  })\n\n  observer.observe(document, {\n    childList: true,\n    subtree: true\n  })\n}\n"],
  "mappings": "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",
  "names": ["PickMeUi", "element", "settings", "container", "pos", "offset", "getOffsetFromBoundingBox", "top", "right", "selectOffsetTop", "selectOffsetBot", "wrapper", "button", "buttonClass", "buttonDisabledClass", "popup", "searchInputClass", "allOptions", "selectedOptions", "optgroups", "optgroupLabel", "label", "pageUl", "buildUl", "hr", "li", "buildLi", "optgroupValues", "ul", "value", "optionData", "option", "setLiSelected", "allLis", "hoveredIndex", "first", "entry", "entryOffsetTop", "shouldScrollDown", "shouldScrollUp", "selectedValues", "match", "count", "joinSelectedTexts", "selected", "additionalClasses", "listClass", "options", "text", "subtext", "imgAttributes", "textSpan", "imageTag", "attr", "subtextDom", "addCheck", "checkedIconHtml", "wrap", "check", "box", "docElem", "de_default", "en_default", "i18n", "de_default", "en_default", "i18n_default", "PickMeSettings", "props", "i18n_default", "PickMe", "options", "PickMeSettings", "option", "onDomRemove", "parentNode", "optgroupLabel", "optionData", "PickMeUi", "li", "lowerInputValue", "filteredValues", "optGroupLabel", "values", "value", "target", "clickedButton", "selected", "msg", "someObject", "element", "onDetachCallback", "observer", "isDetached", "el"]
}
