!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var s=t();for(var i in s)("object"==typeof exports?exports:e)[i]=s[i]}}(window,(function(){return function(e){var t={};function s(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(i,r,function(t){return e[t]}.bind(null,r));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncPick=void 0,s(1);var i=o(s(2)),r=o(s(4)),n=o(s(5));function o(e){return e&&e.__esModule?e:{default:e}}i.default.i18n={de:r.default,en:n.default},t.SyncPick=i.default},function(e,t,s){},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var s=[],i=!0,r=!1,n=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done)&&(s.push(o.value),!t||s.length!==t);i=!0);}catch(e){r=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(r)throw n}}return s}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=l;var r,n=s(3),o=(r=n)&&r.__esModule?r:{default:r};function l(e){return this.id=e.id,this.label=document.querySelector('label[for="'+this.id+'"]'),this.isInitialized()&&l.elements[this.id].destroy(),this.element=document.getElementById(this.id),this.language=e.language||document.documentElement.lang||"en",this.i18n=l.i18n?l.i18n[this.language]:{},this.textProp=e.textProp||"name",this.subtextProp=e.subtextProp||"subtext",this.searchTimeout=e.searchTimeout||50,this.searchPlaceholder=e.searchPlaceholder||this.i18n.searchPlaceholder||"Search",this.searchInputClasses=e.searchInputClasses||[],this.buttonClasses=e.buttonClasses||[],this.emptySelectButtonText=e.emptySelectButtonText||this.i18n.emptySelectButtonText||"Select",this.buttonDisabledClasses=e.buttonDisabledClasses||[],this.buttonIconClasses=e.buttonIconClasses||["fas","fa-fw","fa-caret-down"],this.checkedIconClasses=e.checkedIconClasses||["fas","fa-fw","fa-check"],this.listClasses=e.listClasses||[],this.selectedTextFormat=e.selectedTextFormat||null,this.selectedTextVariable=e.selectedTextVariable||"%num%",this.selectedText=e.selectedText||this.i18n.selectedText||this.selectedTextVariable+" selected",this.noResultsText=e.noResultsText||this.i18n.noResultsText||"No results",this.container=e.container||null,this.withSearch=!!e.withSearch,this.dropdownAlignRight=!!e.dropdownAlignRight,this.popupWidth=e.popupWidth||"300px",this.values=e.values||null,this.dropdownValues=e.dropdownValues||null,this.debug=e.debug||!1,this.customDebugHandler=e.customDebugHandler||null,this.disabled=!!this.element.disabled||!!e.disabled,this.open=!1,this.initialize(),this.logDebugMessage("initialized with options:",this),this}l.elements={},l.prototype.initialize=function(){if(this.markup=this.buildMarkup(),this.disabled||(this.addHandlers(),this.addEvents()),this.setupValues(),!this.disabled){var e=this.markup.appendEntries(this.dropdownValues);this.addEventListenersForPage(e)}this.register(),this.markup.setButtonText(this.values)},l.prototype.buildMarkup=function(){return new o.default({element:this.element,disabled:this.disabled,textProp:this.textProp,subtextProp:this.subtextProp,searchPlaceholder:this.searchPlaceholder,searchInputClasses:this.searchInputClasses,buttonClasses:this.buttonClasses,buttonDisabledClasses:this.buttonDisabledClasses,emptySelectButtonText:this.emptySelectButtonText,buttonIconClasses:this.buttonIconClasses,checkedIconClasses:this.checkedIconClasses,listClasses:this.listClasses,selectedTextFormat:this.selectedTextFormat,selectedTextVariable:this.selectedTextVariable,selectedText:this.selectedText,noResultsText:this.noResultsText,dividerText:this.dividerText,container:this.container,withSearch:this.withSearch,dropdownAlignRight:this.dropdownAlignRight,popupWidth:this.popupWidth})},l.prototype.addHandlers=function(){this.togglePopupHandler=this.togglePopup.bind(this),this.searchHandler=this.search.bind(this),this.closePopupHandler=this.closePopup.bind(this),this.selectHandler=this.select.bind(this),this.stopPropagationHandler=function(e){e.stopPropagation()},this.buttonKeyHandler=this.onButtonKeyDown.bind(this),this.markupKeyHandler=this.onMarkupKeyDown.bind(this),this.labelClickHandler=function(e){e.preventDefault(),this.markup.button.focus()}.bind(this),this.containerPositionHandler=this.markup.positionPopup.bind(this.markup)},l.prototype.onButtonKeyDown=function(e){13===e.keyCode&&(e.preventDefault(),this.togglePopup(e))},l.prototype.onMarkupKeyDown=function(e){if(9===e.keyCode||27===e.keyCode)this.closePopupAndFocus();else if(40===e.keyCode)this.markup.focusNextEntry();else if(38===e.keyCode)this.markup.focusPreviousEntry();else if(13===e.keyCode){e.preventDefault();var t=this.markup.getSelected();t&&this.select({currentTarget:t})}},l.prototype.addEvents=function(){this.markup.button.addEventListener("click",this.togglePopupHandler),this.withSearch&&this.markup.searchInput.addEventListener("input",this.searchHandler),this.markup.popup.addEventListener("click",this.stopPropagationHandler),this.markup.button.addEventListener("keydown",this.buttonKeyHandler),this.markup.popup.addEventListener("keydown",this.markupKeyHandler),document.addEventListener("click",this.closePopupHandler),window.addEventListener("resize",this.containerPositionHandler),window.addEventListener("scroll",this.containerPositionHandler),this.label&&this.label.addEventListener("click",this.labelClickHandler);var e,t,s,i=this;e=this.markup.element,t=function(){i.destroy()},(s=new MutationObserver((function(){(function e(t){return t.parentNode!==document&&(null===t.parentNode||e(t.parentNode))})(e)&&(s.disconnect(),t())}))).observe(document,{childList:!0,subtree:!0})},l.prototype.removeEvents=function(){var e=this;this.markup.button.removeEventListener("click",this.togglePopupHandler),this.markup.searchInput.removeEventListener("input",this.searchHandler),Array.apply(null,this.markup.resultsWrapper.querySelectorAll("li")).forEach((function(t){t.removeEventListener("click",e.selectHandler)})),this.markup.popup.removeEventListener("click",this.stopPropagationHandler),this.markup.button.removeEventListener("keydown",this.buttonKeyHandler),this.markup.popup.removeEventListener("keydown",this.markupKeyHandler),document.removeEventListener("click",this.closePopupHandler),window.removeEventListener("resize",this.containerPositionHandler),window.removeEventListener("scroll",this.containerPositionHandler),this.label&&this.label.removeEventListener("click",this.labelClickHandler)},l.prototype.setupValues=function(){if(!this.values){this.values={},this.dropdownValues={};var e=this;Array.apply(null,this.element.options).filter((function(e){return e.selected})).forEach((function(t){e.values[t.value]=e.buildValue(t.innerHTML,t.getAttribute("data-subtext"),t.selected.toString())})),Array.apply(null,this.element.options).forEach((function(t){e.dropdownValues[t.value]=e.buildValue(t.innerHTML,t.getAttribute("data-subtext"),t.selected.toString())}))}},l.prototype.togglePopup=function(){this.open?this.closePopupAndFocus():this.openPopup()},l.prototype.search=function(){this.searchInputTimer&&clearTimeout(this.searchInputTimer);var e=this.markup.searchInput.value;if(this.shouldSearch(e)){var t=this;t.previousSearchValue=e;var s=e.toLowerCase();this.searchInputTimer=setTimeout((function(){var e={};Object.entries(t.dropdownValues).forEach((function(t){var r=i(t,2),n=r[0],o=r[1];o.name.toLowerCase().includes(s)&&(e[n]=o)})),t.markup.resultsWrapper.removeChild(t.markup.resultsWrapper.querySelector("ul"));var r=t.markup.appendEntries(e);t.addEventListenersForPage(r)}),t.searchTimeout)}},l.prototype.openPopup=function(){this.markup.popup.classList.add("sp__popup--visible"),this.open=!0,this.markup.open=!0,this.markup.positionPopup(),this.withSearch&&this.markup.searchInput.focus()},l.prototype.closePopupAndFocus=function(e){this.closePopup(e),this.markup.button.focus()},l.prototype.closePopup=function(e){var t=e&&(e.target===this.markup.button||e.target.parentElement===this.markup.button);this.open&&!t&&(this.markup.popup.classList.remove("sp__popup--visible"),this.open=!1,this.markup.open=!1,this.withSearch&&this.resetSearch())},l.prototype.addEventListenersForPage=function(e){var t=this;Array.apply(null,e.querySelectorAll("li.sp__results-list__item")).forEach((function(e){e.addEventListener("click",t.selectHandler)}))},l.prototype.shouldSearch=function(e){return this.previousSearchValue!==e},l.prototype.select=function(e){var t=e.currentTarget,s=t.getAttribute("data-value"),i=t.getAttribute("data-text"),r=t.getAttribute("data-subtext"),n=void 0;n=this.values[s]?this.buildValue(i,r,"false"):this.buildValue(i,r,"true"),this.toggleValue(s,n),this.markup.setButtonText(this.values),this.triggerChange()},l.prototype.triggerChange=function(){var e=new CustomEvent("Event",{detail:this.values});e.initEvent("change",!0,!0),this.element.dispatchEvent(e)},l.prototype.toggleValue=function(e,t){this.values[e]?this.removeValue(e,t):this.addValue(e,t)},l.prototype.addValue=function(e,t){var s=0,r=!0,n=!1,o=void 0;try{for(var l,a=Object.entries(this.dropdownValues)[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var u=l.value,p=i(u,2),h=p[0];p[1].name===t.name&&(this.values[h]=t,s=h,this.dropdownValues[h].selected=!0)}}catch(e){n=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}var c=this.markup.selectItem(e,t,s);c&&c.addEventListener("click",this.selectHandler),this.withSearch&&this.markup.searchInput.focus(),this.logDebugMessage("Value added:",t)},l.prototype.removeValue=function(e,t){var s=null,r=!0,n=!1,o=void 0;try{for(var l,a=Object.entries(this.dropdownValues)[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var u=l.value,p=i(u,2),h=p[0];p[1].name===t.name&&(s=h,delete this.values[s],this.dropdownValues[s].selected=!1)}}catch(e){n=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}var c=this.markup.deselectItem(s);c&&c.removeEventListener("click",this.selectHandler),this.logDebugMessage("Value removed:",t)},l.prototype.buildValue=function(e,t,s){var i={};return i[this.textProp]=e,i[this.subtextProp]=t,i.selected="true"===s,i},l.prototype.logDebugMessage=function(e,t){this.debug&&(e&&console.log("SyncPick#"+this.id,e),t&&console.log(t),"function"==typeof this.customDebugHandler&&this.customDebugHandler(this))},l.prototype.register=function(){l.elements[this.id]=this},l.prototype.isInitialized=function(){return void 0!==window.SyncPick&&!!l.elements[this.id]},l.prototype.resetSearch=function(){this.markup.searchInput.value="",this.search()},l.prototype.destroy=function(){this.disabled||this.removeEvents(),this.markup.destroy(),this.values={},this.dropdownValues={},delete this.markup,delete l.elements[this.id]},l.prototype.reload=function(){this.destroy(),this.disabled=!!this.element.disabled,this.values=null,this.initialize()}},function(e,t,s){"use strict";function i(e){this.element=e.element,this.multiple=e.multiple||!1,this.disabled=e.disabled||!1,this.valueProp=e.valueProp,this.textProp=e.textProp,this.subtextProp=e.subtextProp,this.searchPlaceholder=e.searchPlaceholder,this.searchInputClasses=e.searchInputClasses,this.buttonClasses=e.buttonClasses,this.buttonDisabledClasses=e.buttonDisabledClasses,this.emptySelectButtonText=e.emptySelectButtonText,this.buttonIconClasses=e.buttonIconClasses,this.checkedIconClasses=e.checkedIconClasses,this.listClasses=e.listClasses,this.selectedTextFormat=e.selectedTextFormat,this.selectedTextVariable=e.selectedTextVariable,this.selectedText=e.selectedText,this.noResultsText=e.noResultsText,this.dividerText=e.dividerText,this.container=e.container,this.withSearch=e.withSearch,this.dropdownAlignRight=e.dropdownAlignRight,this.popupWidth=e.popupWidth,this.open=!1,this.wrapper=this.buildWrapper(),this.button=this.buildButton(),this.disabled||(this.popup=this.buildPopup()),this.hideOriginalSelect(),this.assemble()}function r(e,t){var s=[];return Object.keys(e).forEach((function(i){s.push(e[i][t])})),s.join(", ")}function n(e){var t=e.text,s=e.value,i=e.subtext,r=document.createElement("li"),n=document.createElement("span");if(n.classList.add("sp__results-list__item__text"),n.innerHTML=t,null!=s&&r.setAttribute("data-value",s),null!=t&&(r.setAttribute("aria-label",t),r.setAttribute("title",n.innerText),r.setAttribute("data-text",t)),null!=i){r.setAttribute("data-subtext",i);var l=document.createElement("small");l.innerHTML=i,l.classList.add("sp__results-list__item__subtext"),n.appendChild(l)}return r.setAttribute("aria-role","listitem"),r.classList.add("sp__results-list__item"),r.appendChild(n),e.selected&&o(r,!0,e.checkedIconClasses),r}function o(e,t,s){if(t){var i=document.createElement("i");s.forEach((function(e){i.classList.add(e)})),i.classList.add("sp__results-list__item__check-mark"),e.appendChild(i)}else{var r=e.querySelector(".sp__results-list__item__check-mark");r&&e.removeChild(r)}}function l(e){var t=document.documentElement;return{top:e.top+(window.pageYOffset||t.scrollTop)-(t.clientTop||0),left:e.left+(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,i.prototype.hideOriginalSelect=function(){this.element.classList.add("visually-hidden")},i.prototype.showOriginalSelect=function(){this.element.style.display="initial"},i.prototype.assemble=function(){if(this.wrapper.appendChild(this.button),!this.disabled)if(this.container){var e=document.querySelector(this.container);e&&(e.appendChild(this.popup),this.popup.style.position="absolute",this.popup.style.top="0")}else this.wrapper.appendChild(this.popup);this.element.parentNode.insertBefore(this.wrapper,this.element)},i.prototype.positionPopup=function(){if(this.open)if(this.container){var e=this.wrapper.getBoundingClientRect(),t=l(e),s=t.top+this.wrapper.offsetHeight;if(this.shouldDropUp()?this.popup.style.top=(s-this.popup.offsetHeight-this.button.offsetHeight-parseInt(window.getComputedStyle(this.popup).marginTop)).toString()+"px":this.popup.style.top=s.toString()+"px",this.dropdownAlignRight){var i=window.innerWidth-e.left-this.wrapper.offsetWidth;this.popup.style.right=i+"px"}else this.popup.style.left=t.left.toString()+"px";this.popup.style.minWidth=this.wrapper.offsetWidth+"px",this.popup.style.width=this.popupWidth,this.popup.style.position="absolute"}else this.shouldDropUp()?(this.popup.style.top="auto",this.popup.style.bottom=(this.button.offsetHeight+parseInt(window.getComputedStyle(this.popup).marginTop)).toString()+"px"):(this.popup.style.top="100%",this.popup.style.bottom="auto")},i.prototype.shouldDropUp=function(){var e=l(this.button.getBoundingClientRect()).top-document.documentElement.scrollTop,t=window.innerHeight-e-this.button.offsetHeight;return e>t&&t<this.popup.offsetHeight},i.prototype.buildWrapper=function(){var e=document.createElement("div");e.classList.add("async-pick"),e.classList.add("async-pick--multiple");var t=this.element.classList;return Array.apply(null,t).forEach((function(t){e.classList.add(t)})),e},i.prototype.buildButton=function(){var e=document.createElement("button");if(e.setAttribute("type","button"),this.buttonClasses.forEach((function(t){e.classList.add(t)})),this.disabled&&this.buttonDisabledClasses.forEach((function(t){e.classList.add(t)})),this.buttonText=document.createElement("span"),this.buttonText.classList.add("sp__button-text"),this.buttonIconClasses&&this.buttonIconClasses.length>0){var t=document.createElement("i");this.buttonIconClasses.forEach((function(e){t.classList.add(e)})),e.appendChild(this.buttonText),e.appendChild(t)}else e.appendChild(this.buttonText);return e},i.prototype.buildPopup=function(){var e=document.createElement("div");return e.classList.add("sp__popup"),this.dropdownAlignRight&&e.classList.add("sp__popup--right"),this.withSearch&&e.appendChild(this.buildSearchInput()),e.appendChild(this.buildResultsScrollWrapper()),e},i.prototype.buildSearchInput=function(){var e=document.createElement("div");e.classList.add("sp__search-input__wrapper"),this.searchInput=document.createElement("input"),this.searchInput.type="search",this.searchInput.setAttribute("placeholder",this.searchPlaceholder),this.searchInput.classList.add("sp__search-input");var t=this;return this.searchInputClasses.forEach((function(e){t.searchInput.classList.add(e)})),e.appendChild(this.searchInput),e},i.prototype.buildResultsScrollWrapper=function(){return this.resultsScrollWrapper=document.createElement("div"),this.resultsScrollWrapper.classList.add("sp__results-scroll-wrapper"),this.resultsWrapper=document.createElement("div"),this.resultsWrapper.classList.add("sp__results"),this.resultsWrapper.setAttribute("aria-role","list"),this.resultsScrollWrapper.appendChild(this.resultsWrapper),this.resultsScrollWrapper},i.prototype.appendEntries=function(e){var t=function(e){var t=document.createElement("ul");return t.classList.add("sp__results-list"),t.setAttribute("aria-role","listbox"),e.forEach((function(e){t.classList.add(e)})),t}(this.listClasses),s=Object.keys(e).map((function(t){return Object.assign({},e[t],{value:t})}));return this.renderNewEntries(s,t),this.resultsWrapper.appendChild(t),t},i.prototype.renderNewEntries=function(e,t){var s=this;if(e.length>0)e.forEach((function(e){var i=n({value:e.value,text:e[s.textProp],subtext:e[s.subtextProp],selected:e.selected,checkedIconClasses:s.checkedIconClasses});t.appendChild(i)}));else{var i=n({text:this.noResultsText});i.classList.add("sp__results-list__item"),t.appendChild(i)}},i.prototype.renderSelectedOption=function(e,t){var s=document.createElement("option");return s.value=e,s.innerHTML=t,s.selected=!0,s.setAttribute("selected",""),s},i.prototype.removeSelectedOption=function(e){Array.apply(null,this.element.options).filter((function(t){return t.value===e||t.value.toString()===e.toString()})).forEach((function(e){e.selected=!1,e.removeAttribute("selected")}))},i.prototype.selectItem=function(e,t,s){var i=this.element.querySelector('select option[value="'+s+'"]'),r=this.renderSelectedOption(i.value,t[this.textProp]);this.element.removeChild(i),this.element.appendChild(r),this.addSelectedClassByValue(e)},i.prototype.deselectItem=function(e){this.removeSelectedOption(e),this.removeSelectedClassByValue(e)},i.prototype.addSelectedClassByValue=function(e){var t=this.resultsWrapper.querySelector('li[data-value="'+e+'"]');t&&o(t,!0,this.checkedIconClasses)},i.prototype.removeSelectedClassByValue=function(e){var t=this.resultsWrapper.querySelector('li[data-value="'+e+'"]');t&&o(t,!1,this.checkedIconClasses)},i.prototype.destroy=function(){if(this.showOriginalSelect(),this.container){var e=document.querySelector(this.container);e&&e.removeChild(this.popup)}this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.wrapper)},i.prototype.getSelected=function(){return this.resultsWrapper.querySelectorAll("li.sp__results-list__item--selected")[0]},i.prototype.focusPreviousEntry=function(){var e=this.getSelected();if(e){var t=e.previousSibling||e.parentNode&&e.parentNode.previousSibling&&e.parentNode.previousSibling.lastChild;t&&(e.classList.remove("sp__results-list__item--selected"),t.classList.add("sp__results-list__item--selected"),this.scrollEntryIntoView(t))}else{var s=this.resultsWrapper.querySelectorAll("li.sp__results-list__item[data-value]")[0];s.classList.add("sp__results-list__item--selected"),this.scrollEntryIntoView(s)}},i.prototype.focusNextEntry=function(){var e=this.getSelected();if(e){var t=e.nextSibling||e.parentNode&&e.parentNode.nextSibling&&e.parentNode.nextSibling.firstChild;t&&(e.classList.remove("sp__results-list__item--selected"),t.classList.add("sp__results-list__item--selected"),this.scrollEntryIntoView(t))}else{var s=this.resultsWrapper.querySelectorAll("li.sp__results-list__item[data-value]")[0];s.classList.add("sp__results-list__item--selected"),this.scrollEntryIntoView(s)}},i.prototype.scrollEntryIntoView=function(e){var t=e.offsetTop-this.resultsScrollWrapper.offsetTop,s=this.resultsScrollWrapper.offsetHeight+this.resultsScrollWrapper.scrollTop<t+e.offsetHeight,i=t<this.resultsScrollWrapper.scrollTop;s?this.resultsScrollWrapper.scrollTop=t-this.resultsScrollWrapper.offsetHeight+e.offsetHeight:i&&(this.resultsScrollWrapper.scrollTop=t)},i.prototype.setButtonText=function(e){e&&Object.keys(e).length>0?this.buttonText.innerHTML=this.renderButtonText(e):this.buttonText.innerHTML=this.emptySelectButtonText},i.prototype.renderButtonText=function(e){if(this.selectedTextFormat){var t=this.selectedTextFormat.match(/count\s?>\s?([0-9]*)/),s=t&&t[1]&&parseInt(t[1]);return s&&s<Object.keys(e).length?this.selectedText.replace(this.selectedTextVariable,Object.keys(e).length):r(e,this.textProp)}return r(e,this.textProp)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={searchPlaceholder:"Suchen",emptySelectButtonText:"Alle anzeigen",noResultsText:"Keine Ergebnisse gefunden",selectedText:"%num% Einträge ausgewählt",dividerText:"Ausgewählte Einträge:"}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={searchPlaceholder:"Search",emptySelectButtonText:"Show all",noResultsText:"No results found",selectedText:"%num% selected",dividerText:"Selected entries:"}}])}));