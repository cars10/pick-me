function r(e){this.element=e.element,this.multiple=e.multiple||!1,this.disabled=e.disabled||!1,this.valueProp=e.valueProp,this.searchPlaceholder=e.searchPlaceholder,this.searchInputClasses=e.searchInputClasses,this.buttonClasses=e.buttonClasses,this.buttonDisabledClasses=e.buttonDisabledClasses,this.emptySelectButtonText=e.emptySelectButtonText,this.buttonIconClasses=e.buttonIconClasses,this.checkedIconClasses=e.checkedIconClasses,this.listClasses=e.listClasses,this.selectedTextFormat=e.selectedTextFormat,this.selectedTextVariable=e.selectedTextVariable,this.selectedText=e.selectedText,this.noResultsText=e.noResultsText,this.container=e.container,this.withSearch=e.withSearch,this.withSelectAllButton=e.withSelectAllButton,this.selectAllButtonClasses=e.selectAllButtonClasses,this.selectAllButtonGroupClasses=e.selectAllButtonGroupClasses,this.selectAllButtonText=e.selectAllButtonText,this.deselectAllButtonText=e.deselectAllButtonText,this.dropdownAlignRight=e.dropdownAlignRight,this.popupWidth=e.popupWidth,this.open=!1,this.wrapper=this.buildWrapper(),this.button=this.buildButton(),this.disabled||(this.popup=this.buildPopup()),this.hideOriginalSelect(),this.assemble()}r.prototype.hideOriginalSelect=function(){this.element.classList.add("visually-hidden"),this.element.setAttribute("tabindex","-1")};r.prototype.showOriginalSelect=function(){this.element.classList.remove("visuallyhidden")};r.prototype.assemble=function(){if(this.wrapper.appendChild(this.button),!this.disabled)if(this.container){let e=document.querySelector(this.container);e&&(e.appendChild(this.popup),this.popup.style.position="absolute",this.popup.style.top="0")}else this.wrapper.appendChild(this.popup);this.element.parentNode.insertBefore(this.wrapper,this.element)};r.prototype.positionPopup=function(){if(this.open)if(this.container){let e=this.wrapper.getBoundingClientRect(),t=y(e),s=t.top+this.wrapper.offsetHeight;if(this.shouldDropUp()?this.popup.style.top=(s-this.popup.offsetHeight-this.button.offsetHeight-parseInt(window.getComputedStyle(this.popup).marginTop)).toString()+"px":this.popup.style.top=s.toString()+"px",this.dropdownAlignRight){let i=window.innerWidth-e.left-this.wrapper.offsetWidth;this.popup.style.right=i+"px"}else this.popup.style.left=t.left.toString()+"px";this.popup.style.minWidth=this.wrapper.offsetWidth+"px",this.popup.style.width=this.popupWidth,this.popup.style.position="absolute"}else this.shouldDropUp()?(this.popup.style.top="auto",this.popup.style.bottom=(this.button.offsetHeight+parseInt(window.getComputedStyle(this.popup).marginTop)).toString()+"px"):(this.popup.style.top="100%",this.popup.style.bottom="auto")};r.prototype.shouldDropUp=function(){let e=this.button.getBoundingClientRect(),s=y(e).top-document.documentElement.scrollTop,i=window.innerHeight-s-this.button.offsetHeight;return s>i&&i<this.popup.offsetHeight};r.prototype.buildWrapper=function(){let e=document.createElement("div");return e.classList.add("pick-me"),this.multiple&&e.classList.add("pick-me--multiple"),e};r.prototype.buildButton=function(){let e=document.createElement("button");if(e.setAttribute("type","button"),e.classList.add("pm__button"),this.buttonClasses.forEach(function(t){e.classList.add(t)}),this.disabled&&(e.disabled=!0,this.buttonDisabledClasses.forEach(function(t){e.classList.add(t)})),this.buttonText=document.createElement("span"),this.buttonText.classList.add("pm__button-text"),this.buttonIconClasses&&this.buttonIconClasses.length>0){let t=document.createElement("i");this.buttonIconClasses.forEach(function(s){t.classList.add(s)}),e.appendChild(this.buttonText),e.appendChild(t)}else e.appendChild(this.buttonText);return e};r.prototype.buildPopup=function(){let e=document.createElement("div");return e.classList.add("pm__popup"),this.dropdownAlignRight&&e.classList.add("pm__popup--right"),this.withSearch&&e.appendChild(this.buildSearchInput()),this.withSelectAllButton&&e.appendChild(this.buildSelectAllButtons()),e.appendChild(this.buildResultsScrollWrapper()),e};r.prototype.buildSearchInput=function(){let e=document.createElement("div");e.classList.add("pm__search-input__wrapper"),this.searchInput=document.createElement("input"),this.searchInput.type="search",this.searchInput.setAttribute("placeholder",this.searchPlaceholder),this.searchInput.classList.add("pm__search-input");let t=this;return this.searchInputClasses.forEach(function(s){t.searchInput.classList.add(s)}),e.appendChild(this.searchInput),e};r.prototype.buildSelectAllButtons=function(){let e=document.createElement("div");this.selectAllButtonGroupClasses.forEach(function(s){e.classList.add(s)}),this.selectAllButton=document.createElement("button"),this.selectAllButton.setAttribute("type","button"),this.deselectAllButton=document.createElement("button"),this.deselectAllButton.setAttribute("type","button"),this.selectAllButton.innerHTML=this.selectAllButtonText,this.deselectAllButton.innerHTML=this.deselectAllButtonText;let t=this;return this.selectAllButtonClasses.forEach(function(s){t.selectAllButton.classList.add(s),t.deselectAllButton.classList.add(s)}),e.appendChild(this.selectAllButton),e.appendChild(this.deselectAllButton),e};r.prototype.buildResultsScrollWrapper=function(){return this.resultsScrollWrapper=document.createElement("div"),this.resultsScrollWrapper.classList.add("pm__results-scroll-wrapper"),this.resultsWrapper=document.createElement("div"),this.resultsWrapper.classList.add("pm__results"),this.resultsWrapper.setAttribute("aria-role","list"),this.resultsScrollWrapper.appendChild(this.resultsWrapper),this.resultsScrollWrapper};r.prototype.appendEntries=function(e,t,s){if(Object.keys(e).length>0)Object.entries(e).forEach(([i,n],o,u)=>{if(i&&i.length>0){let c=document.createElement("span");c.classList.add("pm__opt-group-label"),c.innerText=i,this.resultsWrapper.appendChild(c)}let a=g(this.listClasses);a.setAttribute("data-label",i);let d=s[i];if(this.renderNewEntries(n,a,t,d),this.resultsWrapper.appendChild(a),i&&i.length>0&&u[o+1]){let c=document.createElement("hr");c.classList.add("pm__hr"),this.resultsWrapper.appendChild(c)}});else{let i=b({text:this.noResultsText});i.classList.add("pm__results-list__item--muted");let n=g(this.listClasses);n.appendChild(i),this.resultsWrapper.appendChild(n)}};r.prototype.renderNewEntries=function(e,t,s,i){let n=this;i.forEach(o=>{let u=e[o];if(!u)return;let a=b({value:o,...u,selected:s.indexOf(o)>-1,multiple:n.multiple,checkedIconClasses:n.checkedIconClasses});t.appendChild(a)})};r.prototype.selectItem=function(e){let t=this.element.querySelector('option[value="'+e.replaceAll('"','\\"')+'"]');t.selected=!0,t.setAttribute("data-selected",""),this.addSelectedClassByValue(e)};r.prototype.deselectItem=function(e){let t=this.element.querySelector('option[value="'+e.replaceAll('"','\\"')+'"]');t.selected=!1,t.removeAttribute("data-selected"),this.removeSelectedClassByValue(e)};r.prototype.addSelectedClassByValue=function(e){let t=this.resultsWrapper.querySelector('li[data-value="'+e.replaceAll('"','\\"')+'"]');t&&p(t,!0,this.multiple,this.checkedIconClasses)};r.prototype.removeSelectedClassByValue=function(e){let t=this.resultsWrapper.querySelector('li[data-value="'+e.replaceAll('"','\\"')+'"]');t&&p(t,!1,this.multiple,this.checkedIconClasses)};r.prototype.destroy=function(){if(this.showOriginalSelect(),this.container){let e=document.querySelector(this.container);e&&e.removeChild(this.popup)}this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.wrapper)};r.prototype.getSelected=function(){return this.resultsWrapper.querySelectorAll("li.pm__results-list__item--selected")[0]};r.prototype.getHovered=function(){return this.hovered};r.prototype.focusPreviousEntry=function(){this.hovered||(this.hovered=this.getSelected());let e=Array.from(this.resultsWrapper.querySelectorAll("li.pm__results-list__item[data-value]"));if(this.hovered){let t=e.indexOf(this.hovered);t>0&&(this.hovered.classList.remove("pm__results-list__item--hover"),this.hovered=e[t-1],this.hovered.classList.add("pm__results-list__item--hover"),this.scrollEntryIntoView(this.hovered))}else{let t=e[0];if(!t)return;t.classList.add("pm__results-list__item--hover"),this.hovered=t,this.scrollEntryIntoView(t)}};r.prototype.focusNextEntry=function(){this.hovered||(this.hovered=this.getSelected());let e=Array.from(this.resultsWrapper.querySelectorAll("li.pm__results-list__item[data-value]"));if(this.hovered){let t=e.indexOf(this.hovered);t<e.length-1&&(this.hovered.classList.remove("pm__results-list__item--hover"),this.hovered=e[t+1],this.hovered.classList.add("pm__results-list__item--hover"),this.scrollEntryIntoView(this.hovered))}else{let t=e[0];if(!t)return;t.classList.add("pm__results-list__item--hover"),this.hovered=t,this.scrollEntryIntoView(t)}};r.prototype.scrollEntryIntoView=function(e){let t=e.offsetTop-this.resultsScrollWrapper.offsetTop,s=this.resultsScrollWrapper.offsetHeight+this.resultsScrollWrapper.scrollTop<t+e.offsetHeight,i=t<this.resultsScrollWrapper.scrollTop;s?this.resultsScrollWrapper.scrollTop=t-this.resultsScrollWrapper.offsetHeight+e.offsetHeight:i&&(this.resultsScrollWrapper.scrollTop=t)};r.prototype.setButtonText=function(e){e&&Object.keys(e).length>0?this.buttonText.innerHTML=this.renderButtonText(e):this.buttonText.innerHTML=this.emptySelectButtonText};r.prototype.renderButtonText=function(e){if(this.selectedTextFormat){let t=this.selectedTextFormat.match(/count\s?>\s?([0-9]*)/),s=t&&t[1]&&parseInt(t[1]);return s&&s<Object.keys(e).length?this.selectedText.replace(this.selectedTextVariable,Object.keys(e).length):f(e)}else return f(e)};function f(e){let t=[];return Object.keys(e).forEach(function(s){t.push(e[s].text)}),t.join(", ")}function g(e){let t=document.createElement("ul");return t.classList.add("pm__results-list"),t.setAttribute("aria-role","listbox"),e.forEach(function(s){t.classList.add(s)}),t}function b(e){let t=e.text,s=e.value,i=e.subtext,n=e.img,o=document.createElement("li"),u=document.createElement("span");if(u.classList.add("pm__results-list__item__text"),u.innerHTML=t,typeof s<"u"&&s!==null&&o.setAttribute("data-value",s),typeof t<"u"&&t!==null&&(o.setAttribute("aria-label",t),o.setAttribute("title",u.innerText),o.setAttribute("data-text",t)),typeof i<"u"&&i!==null){o.setAttribute("data-subtext",i);let a=document.createElement("small");a.innerHTML=i,a.classList.add("pm__results-list__item__subtext"),u.appendChild(a)}if(o.setAttribute("aria-role","listitem"),o.classList.add("pm__results-list__item"),typeof n<"u"&&n!==null){let a=document.createElement("img");Object.keys(n).forEach(function(d){a.setAttribute(d,n[d])}),a.classList.add("pm__results-list__item__image"),o.setAttribute("data-img",JSON.stringify(n)),o.appendChild(a)}return o.appendChild(u),e.selected&&p(o,!0,e.multiple,e.checkedIconClasses),o}function p(e,t,s,i){if(t)if(s){let n=document.createElement("i");i.forEach(function(o){n.classList.add(o)}),n.classList.add("pm__results-list__item__check-mark"),e.appendChild(n)}else e.classList.remove("pm__results-list__item--hover"),e.classList.add("pm__results-list__item--selected");else if(s){let n=e.querySelector(".pm__results-list__item__check-mark");n&&e.removeChild(n)}else e.classList.remove("pm__results-list__item--selected")}function y(e){let t=document.documentElement;return{top:e.top+(window.pageYOffset||t.scrollTop)-(t.clientTop||0),left:e.left+(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}}var v={searchPlaceholder:"Suchen",emptySelectButtonText:"Alle anzeigen",noResultsText:"Keine Ergebnisse gefunden",selectedText:"%num% Eintr\xE4ge ausgew\xE4hlt",selectAllButtonText:"Alles ausw\xE4hlen",deselectAllButtonText:"Nichts ausw\xE4hlen"};var S={searchPlaceholder:"Search",emptySelectButtonText:"Show all",noResultsText:"No results found",selectedText:"%num% selected",selectAllButtonText:"Select all",deselectAllButtonText:"Deselect all"};var x={de:v,en:S},m=x;var h=class{element;base;language;search;button;list;selectAll;constructor(t){this.element=document.getElementById(t.id),this.setBase(t.base),this.setLanguage(t.language),this.setSearch(t.search),this.setButton(t.button),this.setList(t.list),this.setSelectAll(t.selectAll)}setBase(t){this.base={},this.base.multiple=!!this.element.multiple||!!t?.multiple,this.base.popup={},this.base.popup.containerSelector=t?.popup?.containerSelector,this.base.popup.alignRight=t?.popup?.alignRight,this.base.popup.width=t?.popup?.width||"300px"}setLanguage(t){this.language={},this.language.locale=t?.locale||document.documentElement.lang||"en",this.language.i18n=t?.i18n||m[t?.locale]||m.en}setSearch(t){this.search={},this.search.enabled=!!t?.enabled,this.search.debounce=t?.debounce||50,this.search.input={},this.search.input.placeholderText=t?.input?.placeholderText||this.language.i18n?.searchPlaceholder||"Search",this.search.input.classList=t?.input?.classList||[],this.search.noResultsText=t?.noResultsText||this.language.i18n.noResultsText||"No results"}setButton(t){this.button={},this.button.placeholderText=t?.placeholderText||this.language.i18n?.emptySelectButtonText||"Select",this.button.classList=t?.classList||[],this.button.iconHtml=t?.iconHtml||"\u2BC6",this.button.selectedText={},this.button.selectedText.format=t?.selectedText?.format,this.button.selectedText.variable=t?.selectedText?.variable||"%num%",this.button.selectedText.text=t?.selectedText?.text||this.language.i18n?.selectedText||"%num% selected"}setList(t){this.list={},this.list.checkedIconHtml=t?.checkedIconHtml||"\u2713",this.list.classList=t?.classList||[]}setSelectAll(t){this.selectAll={},this.selectAll.enabled=!!t?.enabled,this.selectAll.classList=t?.classList||[],this.selectAll.wrapperClassList=t?.wrapperClassList||[],this.selectAll.selectText=t?.selectText||this.language.i18n?.selectAllButtonText||"Select all",this.selectAll.deselectText=t?.deselectText||this.language.i18n?.deselectAllButtonText||"Deselect all"}};var l=class{constructor(t){return this.id=t.id,this.element=document.getElementById(this.id),this.label=document.querySelector('label[for="'+this.id+'"]'),this.settings=new h(t),this.selectedValues=t.values||null,this.debug=t.debug||!1,this.initialSelectedValues=[],this.open=!1,this.initialize(),this.logDebugMessage("initialized with options:",this.settings),this}initialize(){this.setupInitialValues(),this.markup=this.buildMarkup(),this.addHandlers(),this.addEvents(),this.setupValues(),this.markup.appendEntries(this.dropdownValues,Object.keys(this.selectedValues),this.selectedValuesOrder),this.addEventListenersForPage(),this.register(),this.markup.setButtonText(this.selectedValues)}setupInitialValues(){this.element.querySelectorAll("option[selected]").forEach(s=>this.initialSelectedValues.push(s.value))}addHandlers(){this.togglePopupHandler=this.togglePopup.bind(this),this.searchHandler=this.search.bind(this),this.closePopupHandler=this.closePopup.bind(this),this.selectHandler=this.select.bind(this),this.stopPropagationHandler=t=>t.stopPropagation(),this.buttonKeyHandler=this.onButtonKeyDown.bind(this),this.markupKeyHandler=this.onMarkupKeyDown.bind(this),this.selectAllHandler=this.selectAllEntries.bind(this),this.deselectAllHandler=this.deselectAllEntries.bind(this),this.labelClickHandler=function(t){t.preventDefault(),this.markup.button.focus()}.bind(this),this.containerPositionHandler=this.markup.positionPopup.bind(this.markup),this.resetFormHandler=this.resetAndReload.bind(this)}addEvents(){this.markup.button.addEventListener("click",this.togglePopupHandler),this.settings.search.enabled&&this.markup.searchInput.addEventListener("input",this.searchHandler),this.markup.popup.addEventListener("click",this.stopPropagationHandler),this.settings.selectAll.enabled&&(this.markup.selectAllButton.addEventListener("click",this.selectAllHandler),this.markup.deselectAllButton.addEventListener("click",this.deselectAllHandler)),this.settings.search.enabled?(this.markup.button.addEventListener("keydown",this.buttonKeyHandler),this.markup.popup.addEventListener("keydown",this.markupKeyHandler)):this.markup.button.addEventListener("keydown",this.markupKeyHandler),document.addEventListener("click",this.closePopupHandler),window.addEventListener("resize",this.containerPositionHandler),window.addEventListener("scroll",this.containerPositionHandler),this.label&&this.label.addEventListener("click",this.labelClickHandler),this.element.form&&this.element.form.addEventListener("reset",this.resetFormHandler),_(this.markup.element,this.destroy.bind(this))}};l.elements={};l.prototype.buildMarkup=function(){return new r({element:this.element,multiple:this.settings.base.multiple,disabled:!1,searchPlaceholder:this.settings.search.input.placeholderText,searchInputClasses:this.settings.search.input.classList,buttonClasses:this.settings.button.classList,buttonDisabledClasses:[],emptySelectButtonText:this.settings.button.placeholderText,buttonIconClasses:[],checkedIconClasses:[],listClasses:this.settings.list.classList,selectedTextFormat:this.settings.button.selectedText.format,selectedTextVariable:this.settings.button.selectedText.variable,selectedText:this.settings.button.selectedText.text,noResultsText:this.settings.search.noResultsText,container:this.settings.base.popup.containerSelector,withSearch:this.settings.search.enabled,dropdownAlignRight:this.settings.base.popup.alignRight,popupWidth:this.settings.base.popup.width,withSelectAllButton:this.settings.selectAll.enabled,selectAllButtonClasses:this.settings.selectAll.classList,selectAllButtonGroupClasses:this.settings.selectAll.wrapperClassList,selectAllButtonText:this.settings.selectAll.selectText,deselectAllButtonText:this.settings.selectAll.deselectText})};l.prototype.resetAndReload=function(){this.logDebugMessage("form reset! reloading pick-me"),this.reload()};l.prototype.onButtonKeyDown=function(e){e.keyCode===13&&(e.preventDefault(),this.togglePopup(e))};l.prototype.onMarkupKeyDown=function(e){if(e.keyCode===9||e.keyCode===27)this.closePopupAndFocus();else if(e.keyCode===40)e.preventDefault(),this.markup.focusNextEntry();else if(e.keyCode===38)e.preventDefault(),this.markup.focusPreviousEntry();else if(e.keyCode===13)if(e.preventDefault(),this.open){let t=this.markup.getHovered();t&&this.select({currentTarget:t})}else this.openPopup()};l.prototype.removeEvents=function(){let e=this;this.markup&&(this.markup.button.removeEventListener("click",this.togglePopupHandler),this.settings.search.enabled&&this.markup.searchInput.removeEventListener("input",this.searchHandler),Array.apply(null,this.markup.resultsWrapper.querySelectorAll("li")).forEach(function(t){t.removeEventListener("click",e.selectHandler)}),this.markup.popup.removeEventListener("click",this.stopPropagationHandler),this.markup.button.removeEventListener("keydown",this.buttonKeyHandler),this.markup.popup.removeEventListener("keydown",this.markupKeyHandler)),document.removeEventListener("click",this.closePopupHandler),window.removeEventListener("resize",this.containerPositionHandler),window.removeEventListener("scroll",this.containerPositionHandler),this.label&&this.label.removeEventListener("click",this.labelClickHandler),this.element.form&&this.element.form.removeEventListener("reset",this.resetFormHandler)};l.prototype.setupValues=function(){if(!this.selectedValues){this.selectedValues={},this.dropdownValues={},this.selectedValuesOrder={};let e=this;Array.apply(null,this.element.options).forEach(function(t){let s;t.parentNode.nodeName==="OPTGROUP"?s=t.parentNode.label:s="",e.selectedValuesOrder[s]||(e.selectedValuesOrder[s]=[]),e.selectedValuesOrder[s].push(t.value),e.dropdownValues[s]||(e.dropdownValues[s]={});let i={text:t.innerHTML,subtext:t.getAttribute("data-subtext"),img:JSON.parse(t.getAttribute("data-img"))};e.dropdownValues[s][t.value]=i,(t.selected||t.hasAttribute("selected")&&["","true",!0,"selected"].includes(t.getAttribute("selected")))&&(e.selectedValues[t.value]=i,t.setAttribute("data-selected",!0))})}};l.prototype.togglePopup=function(){this.open?this.closePopupAndFocus():this.openPopup()};l.prototype.search=function(){this.searchInputTimer&&clearTimeout(this.searchInputTimer),this.markup.hovered&&this.markup.hovered.classList.remove("pm__results-list__item--hover"),this.markup.hovered=!1;let e=this.markup.searchInput.value;if(this.shouldSearch(e)){let t=this;t.previousSearchValue=e;let s=e.toLowerCase();this.searchInputTimer=setTimeout(function(){let i={};Object.entries(t.dropdownValues).forEach(([n,o])=>{Object.entries(o).forEach(([u,a])=>{a.text.toLowerCase().includes(s)&&(i[n]||(i[n]={}),i[n][u]=a)})}),t.markup.resultsWrapper.innerHTML="",t.markup.appendEntries(i,Object.keys(t.selectedValues),t.selectedValuesOrder),t.addEventListenersForPage()},t.settings.search.debounce)}};l.prototype.openPopup=function(){this.markup.popup.classList.add("pm__popup--visible"),this.open=!0,this.markup.open=!0,this.markup.positionPopup(),this.settings.search.enabled&&this.markup.searchInput.focus()};l.prototype.closePopupAndFocus=function(e){this.closePopup(e),this.markup.button.focus()};l.prototype.closePopup=function(e){let t=e&&(e.target===this.markup.button||e.target.parentElement===this.markup.button);this.open&&!t&&(this.markup.popup.classList.remove("pm__popup--visible"),this.open=!1,this.markup.open=!1,this.markup.hovered&&this.markup.hovered.classList.remove("pm__results-list__item--hover"),this.markup.hovered=!1,this.settings.search.enabled&&this.resetSearch())};l.prototype.selectAllEntries=function(){let e=Object.keys(this.selectedValues);this.selectedValues=Object.assign({},...Object.values(this.dropdownValues)),Object.keys(this.selectedValues).forEach(t=>{e.includes(t)||this.markup.selectItem(t)}),this.markup.setButtonText(this.selectedValues),this.triggerChange()};l.prototype.deselectAllEntries=function(){Object.keys(this.selectedValues).forEach(e=>{this.markup.deselectItem(e)}),this.selectedValues={},this.markup.setButtonText(this.selectedValues),this.triggerChange()};l.prototype.addEventListenersForPage=function(){let e=this;Array.apply(null,e.markup.resultsWrapper.querySelectorAll("li.pm__results-list__item[data-value]:not(.pm__results-list__item--disabled)")).forEach(function(t){t.addEventListener("click",e.selectHandler)})};l.prototype.shouldSearch=function(e){return this.previousSearchValue!==e};l.prototype.select=function(e){let t=e.currentTarget,s=t.getAttribute("data-value"),i={text:t.getAttribute("data-text"),subtext:t.getAttribute("data-subtext"),disabled:t.getAttribute("data-disabled"),img:t.getAttribute("data-img")?JSON.parse(t.getAttribute("data-img")):null};this.settings.base.multiple?this.toggleSelectedValue(s,i):this.setSelectedValue(s,i),this.markup.setButtonText(this.selectedValues),this.settings.base.multiple||this.closePopupAndFocus(),this.triggerChange()};l.prototype.triggerChange=function(){let e=new CustomEvent("Event",{detail:this.selectedValues});e.initEvent("change",!0,!0),this.element.dispatchEvent(e),this.logDebugMessage("changeTriggered")};l.prototype.toggleSelectedValue=function(e,t){this.selectedValues[e]?this.removeSelectedValue(e,t):this.addSelectedValue(e,t)};l.prototype.addSelectedValue=function(e,t){this.selectedValues[e]=t,this.markup.selectItem(e),this.settings.search.enabled&&this.markup.searchInput.focus(),this.logDebugMessage("Value added:",t)};l.prototype.removeSelectedValue=function(e,t){delete this.selectedValues[e],this.markup.deselectItem(e),this.logDebugMessage("Value removed:",t)};l.prototype.setSelectedValue=function(e,t){if(Object.keys(this.selectedValues).length>0){this.removeSelectedValue(Object.keys(this.selectedValues)[0]);let s=this.markup.getSelected();s&&s.classList.remove("pm__results-list__item--selected")}this.addSelectedValue(e,t),this.logDebugMessage("Value set:",t)};l.prototype.logDebugMessage=function(e,t){this.debug&&(e&&console.log("PickMe#"+this.id,e),t&&console.log(t))};l.prototype.register=function(){l.elements[this.id]=this};l.prototype.resetSearch=function(){this.markup.searchInput.value="",this.search()};l.prototype.destroy=function(){this.removeEvents(),this.markup.destroy(),this.selectedValues=null,this.dropdownValues=null,delete this.markup,delete l.elements[this.id],this.element.classList.remove("visually-hidden")};l.prototype.reload=function(){Object.keys(this.selectedValues).forEach(e=>{this.markup.deselectItem(e)}),this.destroy(),this.initialSelectedValues.forEach(e=>{let t=this.element.querySelector('option[value="'+e.replaceAll('"','\\"')+'"]');t.selected=!0}),this.initialize()};function _(e,t){let s=new MutationObserver(function(){function i(n){return n.parentNode===document?!1:n.parentNode===null?!0:i(n.parentNode)}i(e)&&(s.disconnect(),t())});s.observe(document,{childList:!0,subtree:!0})}export{l as default};
//# sourceMappingURL=pick-me.min.js.map
